---
title:  "[개발 기록] Racingcar"

categories:
  - log
tags:
  - [log]
  
toc: true
toc_sticky: true

breadcrumbs: true

date: 2023-11-03
last_modified_at: 2023-11-03
---

# 자동차 경주

### 기능 요구사항
* [] 횟수가 주어진다. (라운드 진행 개수)
* [] n대의 자동차의 개수를 입력할 수 있다. (참여자 수)
* [] 자동차는 전진 또는 멈출 수 있다. (자동차)
* [] 자동차는 0에서 9 사이의 랜덤 값을 매 라운드 추첨한다.
* [] 랜덤 값이 4이상이면 전진, 아니면 정지이다.
* [] 라운드마다 자동차의 상태를 출력한다.

### 프로그래밍 요구사항
* [] InputView, ResultView 와 같은 UI 클래스를 따로 분리한다.
* [] 모든 로직에 단위 테스트를 구현한다.
* [] 자바 코드 컨벤션을 지키면서 프로그래밍한다.

### 기능 순서도
1. 사용자에게 자동차 개수를 입력 받는다. (IntputView)
2. 개수만큼 자동차가 생성된다. (Car, Cars)
3. 사용자에게 횟수를 입력 받는다. (IntputView)
4. 횟수만큼 라운드가 생성된다. (Rounds)
5. 라운드를 진행한다. (Round)
   1. 차가 전진하거나 정지한다. (Car, Movement)
   2. 라운드 결과 판단. (Round, ScoreBoard)
   3. 라운드 결과를 저장. (Round, ScoreBoard)
11. 라운드가 끝났는지 판단한다. (GameBoard, Rounds)
12. 라운드가 끝날 때까지 반복. (GameBoard)

![기능흐름도](/assets/images/tdd/racingcar.png)

### 클래스들
Car : 자동차
- 자동차를 움직인다.
- 자동차의 움진인 결과를 전달한다. (to Round)
RandomGenerator
- 랜덤값을 생성한다.
Round
- 라운드를 진행한다.
- 라운드의 결과를 판단한다.
- 라운드의 결과를 전달한다. (to ScoreBoard)
ScoreBoard
- 라운드의 결과를 저장한다.

### 지켜야할 객체지향 원칙
1. 일급 컬렉션
  - 비지니스에 종속적인 컬렉션 객체를 만들 수 있습니다.

[일급 컬렉션 참고 자료](https://jojoldu.tistory.com/412)

### 개발 하면서 느낀 문제점
1. 의존성과 테스트 가능한 코드.
RandomGenerator라는 랜덤 값에 의존하다 보니 원하는 테스트가 안된다.
아래처럼 자동차의 움직이는 여부는 랜덤 값이 4이상일때인데 랜덤이다보니 원하는 테스트가 되지 않습니다.
여러가지 고민하다 Success 하는 경우와 Fail의 경우 2가지 stub을 제작했습니다.
```java
    @DisplayName("자동차가 전진합니다.")
    @Test
    void a(){
        assertThat(car.decideMovement()).isTrue();
    }

    @DisplayName("자동차가 정지합니다.")
    @Test
    void b(){
        assertThat(car.decideMovement()).isFalse();
    }
```
```
private int pickRandomeValue() {
  return randomGenerator.number();
  }

public boolean decideMovement() {
  return pickRandomeValue() > MOVE_CONDITION;
  }
```



### 네트워킹 데이때 물어보고 싶은 질문
2. 질문하기가 애매합니다. 😅
누군가에게 물어보면 빠른 결정을 낼 수 있는 질문이 있고, 조금 더 고민을 하고 스스로 공부하고도 모르겠으면 질문을 하는 경우도 있습니다.
가볍게 물어보라고 하시는 분들이 많은데 가벼움의 정도가 참 애매하고 궁금합니다.
안되는걸 감지하고 빠르게 물어보면 핑거프린세스 소리를 듣고
끙끙 거리며 공부하다가 정 안되겠어서 물어보면 왜 이제서야 물어보냐는 소리를 듣는데! 
어느 장단에 춤을 춰야 현명하게 춤을 추는 걸까요? 이건 인류의 난제라고 생각합니다..!



---

participateCars.carlist().stream().forEach(car -> {
car.moveStatus();
});