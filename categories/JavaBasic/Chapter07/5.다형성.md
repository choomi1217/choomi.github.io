# 다형성
> 여러가지 형태를 가질 수 있는 능력

## 다형성의 특징

1.  부모 참조변수에 부모 인스턴스
`Tv tv = new Tv();`
   - Tv 클래스의 것만 사용 가능
2. 부모 참조변수에 자식 인스턴스
`Tv captionTv = new CaptionTv();`
   - Tv 클래스의 것만 사용 가능
3. 자식 참조변수에 자식 인스턴스
`CaptionTv realCaptionTv = new CaptionTv();`
   - CaptionTv 클래스의 것도 사용 가능

```java
public class Tv {
    private boolean power;
    private int channel;

    public void power() {
        this.power = !this.power;
    }

    public void channelUp() {
        this.channel++;
    }

    public void channelDown() {
        this.channel--;
    }

    public boolean isPower() {
        return power;
    }

    public void setPower(boolean power) {
        this.power = power;
    }

    public int getChannel() {
        return channel;
    }

    public void setChannel(int channel) {
        this.channel = channel;
    }
}
```

```java
public class CaptionTv extends Tv{
    private String text;

    public void caption(){
        System.out.println("캡션 출력 : " + text);
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }
}
```

```java

public class Client {

    public static void main(String[] args) {
        Tv tv = new Tv();
        Tv captionTv = new CaptionTv();
        CaptionTv realCaptionTv = new CaptionTv();

        tv.power();
        tv.channelUp();
        System.out.println("tv power : " + tv.isPower());
        System.out.println("tv channel : " + tv.getChannel());

        captionTv.power();
        captionTv.channelUp();
        System.out.println("captionTv power : " + captionTv.isPower());
        System.out.println("captionTv channel : " + captionTv.getChannel());

        realCaptionTv.power();
        realCaptionTv.channelUp();
        System.out.println("realCaptionTv power : " + realCaptionTv.isPower());
        System.out.println("realCaptionTv channel : " + realCaptionTv.getChannel());
        realCaptionTv.setText("Hello World");
        realCaptionTv.caption();
    }
}
```


## 참조변수의 형변환

1. 업-캐스팅
   - 자식 타입의 참조변수를 부모 타입의 참조변수로 형변환 할 때는 생략 가능
2. 다운-캐스팅
   - 부모 타입의 참조변수를 자식 타입의 참조변수로 형변환 할 때는 생략 불가능

```java
public class Car {
    String color;
    String door;

    public void drive(){
        System.out.println("drive");
    }
}
```

```java
public class FireEngine extends Car{
    public void water(){
        System.out.println("water");
    }
}
```

```java
public class Ambulance extends Car{
    public void siren(){
        System.out.println("siren");
    }
}
```

```java
public class Client {
    public static void main(String[] args) {
        Car car = null;
        FireEngine fe = new FireEngine();
        FireEngine fe2 = null;

        fe.water();
        car = fe;
        // car.water(); // error
        fe2 = (FireEngine) car;
        fe2.water();

        Car embulance = new Embulance();
        Car fireEngine2 = new FireEngine();
  
        embulance.drive();
        fireEngine2.drive();
  
        ((Embulance) embulance).siren();
        ((FireEngine) fireEngine2).water();
        
    }
}
```

## 형변환을 하기 전에 instanceof 연산자를 통해 확인

```java
public class Client {
    public static void main(String[] args) {
        Car car = null;
        Car fireEngine = new FireEngine();
        car = fireEngine;
  
        FireEngine fireEngine2 = null;
        
        if (car instanceof FireEngine){
          fireEngine2 = (FireEngine) car;
          fireEngine2.drive();
        }else{
          System.out.println("fireEngine2 is not FireEngine instance");
        }
    }
}
```